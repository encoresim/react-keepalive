import{bv as L,r as s,j as e,b3 as N}from"./index-04493f89.js";import{C as A}from"./index-33e142c9.js";import{F as l}from"./index-95a8fbcf.js";import{R as Y,k as G,y as q}from"./Table-de0fe778.js";function M(n,i,r){const{serializer:m,deserializer:u}={serializer:JSON.stringify,deserializer:JSON.parse,...r};return L(n,i,{serializer:m,deserializer:u,storage:"local"})}function X(){const[n,i]=s.useState("combination");return e(s.Fragment,null,e(A,{className:"flex flex-col w-full items-center p-[20px]"},e("div",{className:"p-[15px] w-full"},e("div",{style:{display:n==="business"?"block":"none"}}),e("div",{style:{display:n==="fund"?"block":"none"}}),e("div",{style:{display:n==="combination"?"block":"none"}},e(H,null)))))}function H(){const[n,i]=M("totalPrice",0),[r,m]=M("firstPayRate",3),u=s.useMemo(()=>n*r/10,[n,r]),d=s.useMemo(()=>n-u,[n,u]),[p,R]=M("fundTotal",0),h=s.useMemo(()=>d-p,[d,p]),[x,T]=s.useState(3.1),[g,D]=s.useState(4.2),[v,B]=s.useState(30),[_,k]=s.useState([]),z=[{title:"期数",align:"center",dataIndex:"monthNo",key:"monthNo"},{title:"还款时间",align:"center",dataIndex:"repaymentTime",render:(t,a)=>e("span",null,N(P).add(a.monthNo,"month").format("YYYY-MM-DD"))},{title:"总还款金额(元)",align:"center",dataIndex:"monthPay",render:(t,a)=>e("span",null,(a.monthPay*1e4).toFixed(3))},{title:"商贷还款(元)",align:"center",dataIndex:"monthBusinessPay",render:(t,a)=>e("span",null,(a.monthBusinessPay*1e4).toFixed(3))},{title:"公积金还款(元)",align:"center",dataIndex:"monthFundPay",render:(t,a)=>e("span",null,(a.monthFundPay*1e4).toFixed(3))},{title:"剩余商业贷款(万元)",align:"center",dataIndex:"surplusBusinessPay",render:(t,a)=>e("span",null,a.surplusBusinessPay.toFixed(3))},{title:"剩余公积金贷款(万元)",align:"center",dataIndex:"surplusFundPay",render:(t,a)=>e("span",null,a.surplusFundPay.toFixed(3))},{title:"剩余贷款(万元)",align:"center",dataIndex:"surplusFundPay",render:(t,a)=>e("span",null,(a.surplusFundPay+a.surplusBusinessPay).toFixed(3))}],[f,j]=s.useState(1),[P,K]=s.useState(N().format("YYYY-MM-DD")),[O,F]=s.useState(0);return s.useEffect(()=>{const t=[],a=v*12,c=x/100/12,y=g/100/12;let I=0;if(f===1)for(let b=0;b<a;b++){const w=p*c*Math.pow(1+c,a)/(Math.pow(1+c,a)-1),S=h*y*Math.pow(1+y,a)/(Math.pow(1+y,a)-1),C=w+S,E=p*(Math.pow(1+c,a)-Math.pow(1+c,b))/(Math.pow(1+c,a)-1),J=h*(Math.pow(1+y,a)-Math.pow(1+y,b))/(Math.pow(1+y,a)-1);I=C*12,t.push({monthNo:b+1,monthPay:C,monthFundPay:w,monthBusinessPay:S,surplusFundPay:E,surplusBusinessPay:J})}F(I),k(t)},[p,h,x,g,v,f,F]),e(s.Fragment,null,e("div",{className:"w-full"},e("div",{className:"w-full flex justify-center"},e(l,{size:"small",style:{width:"100%"},labelCol:{span:8},wrapperCol:{span:16}},e("div",{className:"grid-cols-2 grid  gap-0"},e(l.Item,{label:"房屋总价"},e(o,{value:n,onChange:t=>{i(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"首付几成"},e(o,{value:r,onChange:t=>{m(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"成")),e(l.Item,{label:"首付"},e(o,{value:u,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"贷款总额"},e(o,{value:d,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"公积金贷款"},e(o,{value:p,onChange:t=>{R(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"公积金贷款利率"},e(o,{value:x,onChange:t=>{T(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"%")),e(l.Item,{label:"商业贷款"},e(o,{value:h,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"商业贷款利率"},e(o,{value:g,onChange:t=>{D(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"%")),e(l.Item,{label:"贷款年限"},e(o,{value:v,onChange:t=>{B(t)},type:"number"})," ",e("span",{className:"ml-[8px]"},"年")),e(l.Item,{label:"还款模式"},e(Y.Group,{onChange:t=>{j(t.target.value)},value:f},e(Y,{value:1},"等额本息"))),e(l.Item,{label:"开始还款时间"},e(G,{value:P?N(P,"YYYY-MM-DD"):void 0,onChange:(t,a)=>{K(a)}})),f===1&&e(l.Item,{label:"每年还款总额"},e(o,{value:O.toFixed(3),type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元"))))),e("div",{className:"w-full"},e(q,{rowKey:"monthNo",bordered:!0,size:"small",pagination:{defaultPageSize:100},columns:z,dataSource:_}))))}function o(n){const{value:i,onChange:r,type:m}=n;return e("input",{value:i,readOnly:n.readonly,placeholder:n.placeholder||"请输入",onChange:u=>{if(m==="number"){if(u.target.value===""){r&&r("");return}const d=Number(u.target.value);if(isNaN(d))return;r&&r(d);return}else r&&r(u.target.value)},style:{backgroundColor:n.readonly?"rgba(159,157,157,0.24)":"transparent"},type:m||"text",className:"border w-[100px] border-gray-300 rounded h-full outline-none px-[10px] py-[6px]"})}export{X as default};
